<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Gallery</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-wrapper">
        <header>
             <!-- This h1 is now a link back to the main site -->
            <h1><a href="/" style="color: inherit; text-decoration: none;">Visual Gallery</a></h1>
            <nav>
                <!-- This button now links back home -->
                <a href="/" class="nav-button">‚Üê Home</a>
                <button id="nav-timeline" class="active">Gallery</button>
                <button id="nav-themes">Themes</button>
            </nav>
        </header>

        <div class="app-container">
            <!-- Main Content Area -->
            <div class="main-content">
                <div id="multi-select-bar" class="hidden">
                    <button id="edit-selected-btn">Edit Selected</button>
                    <button id="cancel-selection-btn">Cancel</button>
                </div>
                
                <div id="timeline-controls">
                    <button id="select-mode-btn">Select Images</button>
                </div>

                <main id="timeline-view">
                    <!-- Timeline content will be generated by JS -->
                </main>

                <main id="themes-view" class="hidden">
                     <!-- Themes content will be generated by JS -->
                </main>
            </div>

            <!-- AI Assistant Sidebar -->
            <section id="ai-assistant">
                <h2>Ask Gemini Assistant</h2>
                <div id="ai-response"></div>
                <form id="ai-form">
                    <input type="text" id="ai-question" placeholder="e.g., show me images of David" autocomplete="off">
                    <button type="submit">Ask</button>
                </form>
            </section>
        </div>
    </div>

    <!-- Editor Modal (remains outside the main layout) -->
    <div id="editor-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <div class="modal-body">
                <div class="modal-image-container">
                    <img id="modal-img" src="" alt="Full size image">
                </div>
                <div class="modal-form-container">
                    <h2 id="modal-title">Edit Image Details</h2>
                    <form id="editor-form">
                        <input type="hidden" id="modal-photo-id">
                        
                        <label for="modal-book">Category:</label>
                        <select id="modal-book">
                            <option value="">-- Uncategorized --</option>
                            <!-- Options will be populated by JS -->
                        </select>
                        
                        <label for="modal-author">Author/Artist:</label>
                        <input type="text" id="modal-author" placeholder="Who created this image?">
                        
                        <!-- MODIFIED: Wrapped label and new button in a div for layout -->
                        <div class="form-label-container">
                            <label for="modal-description">Description:</label>
                            <button type="button" id="enlarge-description-btn" title="View full description">Enlarge</button>
                        </div>
                        <textarea id="modal-description" rows="3" placeholder="What's happening in this image?"></textarea>
                        
                        <button type="submit">Save Details</button>
                    </form>
                    <hr>
                    <div id="tags-manager">
                        <h3>Tags</h3>
                        <div id="current-tags"></div>
                        <form id="add-tag-form">
                             <input type="text" id="new-tag-name" placeholder="Tag name (e.g., Moses, Sinai)" required>
                             <select id="new-tag-category" required>
                                 <option value="" disabled selected>Select Category</option>
                                 <option value="People">People</option>
                                 <option value="Places">Places</option>
                                 <option value="Events">Events</option>
                             </select>
                             <button type="submit">Add Tag</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NEW: Description Viewer Modal -->
    <div id="description-viewer-backdrop" class="modal-backdrop hidden">
        <div class="description-viewer-content">
             <button class="viewer-close-btn">&times;</button>
             <h2>Full Description</h2>
             <p id="viewer-text"></p>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>